{% extends "base.html" %}
{% block title %}My Profile{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/profile.css') }}">

<div class="profile-container">
  <div class="profile-card">
    <div class="profile-header">
      <img 
        src="{{ url_for('static', filename='profile_pics/' + user.profile_pic) if user.profile_pic else url_for('static', filename='images/default-avatar.png') }}" 
        alt="Profile Picture" 
        class="profile-img">
      <h2 class="profile-name">{{ user.name|title }}</h2>
      <p class="profile-email">{{ user.email }}</p>
    </div>

    <form action="{{ url_for('upload_profile') }}" method="POST" enctype="multipart/form-data" class="upload-form">
      <label for="profile_pic" class="upload-label">Change Profile Picture</label>
      <input type="file" name="profile_pic" id="profile_pic" accept="image/*" required>
      <button type="submit" class="upload-btn">Upload</button>
    </form>

    <div class="profile-info">
      <p><strong>Age:</strong> {{ user.age }}</p>
      <p><strong>Total Connections:</strong> {{ user.friends.count() }}</p>
    </div>

    <hr>

    <div class="referral-section">
      <h4>Your Unique Referral Code</h4>
      <p class="referral-code">{{ user.referral_code }}</p>
      <!-- <p>Share this code with people you meet in real life!</p>
      <div class="qr-code">
        <img src="{{ url_for('generate_qr') }}" alt="Your Referral QR Code">
      </div> -->
      <a href="{{ url_for('logout') }}" class="logout-btn">Logout</a>
    </div>
  </div>
</div>
{% endblock %}