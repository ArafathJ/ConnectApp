{% extends "base.html" %}
{% block title %}My Profile{% endblock %}

{% block content %}
    <h2>My Profile</h2>
    <div class="card profile-card">
        <h3>{{ user.name }}</h3>
    <div>
    <img src="{{ url_for('static', filename='profile_pics/' + user.profile_pic) }}" 
         alt="Profile Picture"
         style="width:150px; height:150px; border-radius:50%; object-fit:cover;">
    </div>

    <form action="{{ url_for('upload_profile') }}" method="POST" enctype="multipart/form-data">
      <input type="file" name="profile_pic" accept="image/*" required>
      <button type="submit">Upload</button>
    </form>

    <p>Email: {{ user.email }}</p>
    <p>Age: {{ user.age }}</p>
        <p><strong>Age:</strong> {{ user.age }}</p>
        <p><strong>Email:</strong> {{ user.email }}</p>
        <p><strong>Total Connections:</strong> {{ user.friends.count() }}</p>
        
        <hr>

        <h4>Your Unique Referral Code</h4>
        <p class="referral-code">{{ user.referral_code }}</p>
        <p>Share this code with people you meet in real life!</p>
        
        <div class="qr-code">
            <img src="{{ url_for('generate_qr') }}" alt="Your Referral QR Code">
        </div>
    </div>
{% endblock %}